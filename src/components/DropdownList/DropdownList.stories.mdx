import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, text, boolean } from '@storybook/addon-knobs';
import { useState } from 'react';

import DropdownList from './DropdownList.component';

export const listItems = [
  { value: 'test1', label: 'Test value 1' },
  { value: 'test2', label: 'Test value 2' },
  { value: 'test3', label: 'Test value 3' },
  { value: 'test4', label: 'Test value 4' },
  { value: 'test5', label: 'Test value 5' },
];
export const Custom = () => {
  const [value, setValue] = useState('');
  const dropdownHandler = e => {
    setValue(e.target.value);
  };
};

<Meta title="Core|Molecules/DropdownList" />

# DropdownList Component

Dropdown list of selectable options.

Implements `FormField API`, and it can be `embeded` with other atoms and molecules to construct more complex interfaces.

## Implementations

#### Default

<Preview>
  <Story name="default" decorators={[withKnobs]}>
    <DropdownList
      list={listItems}
      description={text('Field description', '')}
      error={text('Error message', 'This is Error message')}
      touched={boolean('Touched', false)}
      dirty={boolean('Dirty', false)}
      errstate={boolean('Embeded error override flag', false)}
    />
  </Story>
</Preview>

#### With placeholder

<Preview>
  <Story name="With Placeholder">
    <DropdownList
      placeholder="Choose your option"
      list={listItems}
      onSelect={Custom.dropdownHandler}
      value={Custom.value}
    />
  </Story>
</Preview>

#### Error

Component uses FormField `touched` and `dirty` to show error state and message.

Flag `errstate` is used only when component is embeded as part of some other component and you need to show error state without showing the defoult error message.

<Preview>
  <Story name="With Override Error state">
    <DropdownList list={listItems} errstate={true} />
  </Story>
</Preview>

## Props

<Props of={DropdownList} />

## Notes

```tsx
const listArray: DropdownList[] = [
  {value: 'test1', label: 'Test value 1'},
  {value: 'test2', label: 'Test value 2'},
  {value: 'test3', label: 'Test value 3'},
  {value: 'test4', label: 'Test value 4'},
  {value: 'test5', label: 'Test value 5'}
];

const [value, setValue] = useState('');

const handleDropdownSelect = ev => setValue(ev.target.value);

// You can use React standards value & onSelect props..
<DropdownList list={listArray} onSelect={handleDropdownSelect} value={value}/>

// or embed it directly in HTML5 form & use FormData to collect the value
<DropdownList list={listArray} />
```
